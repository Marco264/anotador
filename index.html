<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anotador Simple</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .toolbar button, .toolbar select { margin-right: 5px; }
        #editor { width: 100%; height: 200px; border: 1px solid #ccc; padding: 10px; overflow-y: auto; }
        .todo-input { margin-bottom: 10px; }
        .todo-table { width: 100%; border-collapse: collapse; }
        .todo-table th, .todo-table td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        .todo-table th:nth-child(1), .todo-table td:nth-child(1) { width: 40px; }
        .todo-table th:nth-child(4), .todo-table td:nth-child(4) { width: 80px; }
        .todo-table th { background-color: #f4f4f4; }
        .calendar { margin-top: 20px; }
        .calendar table { width: 100%; border-collapse: collapse; }
        .calendar th, .calendar td { width: 14.28%; height: 80px; text-align: right; vertical-align: top; border: 1px solid #ddd; padding: 5px; }
        .calendar .today { background-color: #fffae6; }
    </style>
</head>
<body>
    <h1>Anotador Simple</h1>
    <!-- Editor de texto con opciones -->
    <div class="toolbar">
        <label>Color: <input type="color" id="colorPicker"></label>
        <button onclick="format('bold')"><b>B</b></button>
        <button onclick="format('italic')"><i>I</i></button>
        <button onclick="format('underline')"><u>U</u></button>
        <button onclick="format('strikeThrough')"><s>S</s></button>
    </div>
    <div id="editor" contenteditable="true"></div>

    <!-- To-Do List -->
    <h2>Lista To-Do</h2>
    <div class="todo-input">
        <input type="text" id="todoText" placeholder="Nueva tarea">
        <button onclick="addTodo()">Agregar</button>
    </div>
    <table id="todoTable" class="todo-table">
        <thead>
            <tr><th>Hecho</th><th>Tarea</th><th>Fecha</th><th>Acción</th></tr>
        </thead>
        <tbody></tbody>
    </table>

    <!-- Calendario básico -->
    <div class="calendar">
        <h2>Calendario</h2>
        <div>
            <button onclick="prevMonth()">&lt;</button>
            <span id="monthYear"></span>
            <button onclick="nextMonth()">&gt;</button>
        </div>
        <table id="calendarTable">
            <thead>
                <tr>
                    <th>Dom</th><th>Lun</th><th>Mar</th><th>Mié</th><th>Jue</th><th>Vie</th><th>Sáb</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <script>
        // Formato de texto
        const editor = document.getElementById('editor');
        document.getElementById('colorPicker').addEventListener('input', e => {
            document.execCommand('foreColor', false, e.target.value);
        });
        function format(cmd) { document.execCommand(cmd, false, null); }

        // To-Do
        function formatDate(date) {
            const d = date.getDate().toString().padStart(2, '0');
            const m = (date.getMonth()+1).toString().padStart(2, '0');
            const y = date.getFullYear();
            return `${d}/${m}/${y}`;
        }
        function addTodo() {
            const text = document.getElementById('todoText').value.trim();
            if (!text) return;
            const tbody = document.querySelector('#todoTable tbody');
            const row = document.createElement('tr');

            const chkCell = document.createElement('td');
            const txtCell = document.createElement('td');
            const dateCell = document.createElement('td');
            const actionCell = document.createElement('td');

            const chk = document.createElement('input'); chk.type = 'checkbox';
            const btn = document.createElement('button'); btn.textContent = 'Borrar';

            dateCell.textContent = formatDate(new Date());
            txtCell.textContent = text;
            btn.disabled = true;

            chk.addEventListener('change', () => {
                const done = chk.checked;
                txtCell.style.textDecoration = done ? 'line-through' : 'none';
                btn.disabled = !done;
            });
            btn.addEventListener('click', () => {
                tbody.removeChild(row);
            });

            chkCell.appendChild(chk);
            actionCell.appendChild(btn);
            row.append(chkCell, txtCell, dateCell, actionCell);
            tbody.appendChild(row);
            document.getElementById('todoText').value = '';
        }

        // Calendario
        let today = new Date();
        let currentMonth = today.getMonth();
        let currentYear = today.getFullYear();
        const monthNames = ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];
        const calendarBody = document.querySelector('#calendarTable tbody');
        const monthYear = document.getElementById('monthYear');

        function showCalendar(month, year) {
            calendarBody.innerHTML = ''; monthYear.textContent = `${monthNames[month]} ${year}`;
            const firstDay = (new Date(year, month)).getDay();
            const daysInMonth = 32 - new Date(year, month, 32).getDate();
            let date = 1;
            for (let i = 0; i < 6; i++) {
                const rowCal = document.createElement('tr');
                for (let j = 0; j < 7; j++) {
                    const cell = document.createElement('td');
                    if (i === 0 && j < firstDay) {
                        cell.textContent = '';
                    } else if (date > daysInMonth) {
                        cell.textContent = '';
                    } else {
                        cell.textContent = date;
                        if (date === today.getDate() && year === today.getFullYear() && month === today.getMonth()) cell.classList.add('today');
                        date++;
                    }
                    rowCal.appendChild(cell);
                }
                calendarBody.appendChild(rowCal);
            }
        }
        function prevMonth() { currentMonth--; if (currentMonth < 0) { currentMonth = 11; currentYear--; } showCalendar(currentMonth, currentYear); }
        function nextMonth() { currentMonth++; if (currentMonth > 11) { currentMonth = 0; currentYear++; } showCalendar(currentMonth, currentYear); }
        showCalendar(currentMonth, currentYear);
    </script>
</body>
</html>
